<div class="container mt-4">
  <h1>Change Your Password</h1>

  <% if @user %> <!-- Check if @user is present -->
    <%= form_with model: @user, url: password_reset_path(@user.reset_password_token), method: :patch, local: true do |form| %>
      <!-- Include a hidden field for the reset password token -->
      <%= form.hidden_field :reset_password_token, value: @user.reset_password_token %>

      <div class="form-group mb-3">
        <%= form.label :current_password, class: "form-label" %>
        <%= form.password_field :current_password, class: "form-control", placeholder: "Enter your current password" %>
      </div>

      <div class="form-group mb-3">
        <%= form.label :password, class: "form-label" %>
        <%= form.password_field :password, class: "form-control", placeholder: "Enter your new password" %>
      </div>

      <div class="form-group mb-3">
        <%= form.label :password_confirmation, class: "form-label" %>
        <%= form.password_field :password_confirmation, class: "form-control", placeholder: "Confirm your new password" %>
      </div>

      <div class="form-group">
        <%= form.submit "Change Password", class: "btn btn-primary" %>
      </div>
    <% end %>
  <% else %>
    <p>User not found or invalid token.</p> <!-- Message when user is not found -->
  <% end %>

  <div class="mt-3">
    <%= link_to "Back to Sign In", sign_in_path, class: "btn btn-link" %>
  </div>
</div>
